<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BBP Nara Quest Guide</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;700&family=Noto+Sans:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Noto Sans', 'Noto Sans JP', sans-serif;
            background-color: #FFF8DC; /* Cornsilk - Paper feel */
            overflow-x: hidden;
        }
        .leaf {
            position: fixed;
            top: -10%;
            z-index: -1;
            opacity: 0.6;
            animation: fall linear infinite;
        }
        @keyframes fall {
            0% { transform: translate(0, 0) rotate(0deg); }
            100% { transform: translate(100px, 110vh) rotate(360deg); }
        }
        /* Hide scrollbar for cleaner look */
        ::-webkit-scrollbar {
            width: 0px;
            background: transparent;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState } = React;

        // --- Data ---
        const stages = [
            {
                id: 1,
                location: "Kofukuji (Central Golden Hall)",
                locationJp: "ËààÁ¶èÂØ∫„Éª‰∏≠ÈáëÂ†Ç",
                missionTitle: "Red Power Pose",
                missionJp: "Êú±Ëâ≤„ÅÆ‰∏≠ÈáëÂ†Ç„ÇíËÉåÊôØ„Å´„ÄÅ„ÉÅ„Éº„É†ÂÖ®Âì°„Åß„Äå‰∏ÄÁï™Ëá™‰ø°„ÅÆ„ÅÇ„Çã„Éù„Éº„Ç∫„Äç„ÇíÊ±∫„ÇÅ„Å¶ÈõÜÂêàÂÜôÁúü„ÇíÊíÆ„Å£„Å¶„Åè„Å†„Åï„ÅÑÔºÅ",
                missionEn: "Take a group photo with the red \"Central Golden Hall\" in the background. Everyone must strike their \"Most Confident Pose\"!",
                guideJp: "ËààÁ¶èÂØ∫„ÅØËó§ÂéüÊ∞è„ÅÆÊ∞èÂØ∫„Åß„Åô„ÄÇÊúâÂêç„Å™‰∫îÈáçÂ°î„ÅØÁèæÂú®Â∑•‰∫ã‰∏≠„Åß„Åô„Åå„ÄÅ‰ΩïÂ∫¶„ÇÇÂÜçÂª∫„Åï„Çå„ÅüÊ≠¥Âè≤„ÇíÊåÅ„Å°„Åæ„Åô„ÄÇ",
                guideEn: "Kofukuji was the family temple of the powerful Fujiwara clan. The Five-Story Pagoda is under repair, but has a history of resilience."
            },
            {
                id: 2,
                location: "Nara Park",
                locationJp: "Â•àËâØÂÖ¨Âúí",
                missionTitle: "Polite Deer",
                missionJp: "Èπø„Å´„ÅäËæûÂÑÄ„Çí„Åó„ÅüÊôÇ„ÄÅ„Éö„Ç≥„Å£„Å®„ÅäËæûÂÑÄ„ÇíËøî„Åó„Å¶„Åè„Çå„Çã„ÄåÁ§ºÂÑÄÊ≠£„Åó„ÅÑÈπø„Äç„ÇíÊé¢„Åó„Å¶ÂãïÁîª„Å´ÊíÆ„Å£„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ",
                missionEn: "Find a polite deer that bows back to you when you bow to it. Record it on video!",
                guideJp: "Â•àËâØ„ÅÆÈπø„ÅØÁ•ûÊßò„ÅÆ‰Ωø„ÅÑ„Å®„Åï„Çå„Å¶„ÅÑ„Åæ„Åô„ÄÇ„ÅäËæûÂÑÄ„ÅØÈ§å„Çí„Å≠„Å†„ÇãË°åÂãï„Åß„Åô„Åå„ÄÅÁ§ºÂÑÄÊ≠£„Åó„ÅèË¶ã„Åà„Åæ„Åô„Å≠„ÄÇ",
                guideEn: "Deer in Nara are considered messengers of gods. Bowing is how they beg for food, but it looks very polite!"
            },
            {
                id: 3,
                location: "Todaiji (Nandaimon)",
                locationJp: "Êù±Â§ßÂØ∫„ÉªÂçóÂ§ßÈñÄ",
                missionTitle: "Face Mimic 'Nio'",
                missionJp: "ÂçóÂ§ßÈñÄ„ÅÆÈáëÂâõÂäõÂ£´ÂÉè„ÅÆË°®ÊÉÖ„Å®Êâã„ÅÆÂãï„Åç„Çí„ÄÅ„Ç∑„É≥„ÇØ„É≠Áéá100%„ÅßÁúü‰ºº„Åó„Å¶ÊíÆ„Å£„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ",
                missionEn: "At the Great South Gate, take a photo mimicking the facial expression and hand gestures of the Nio Guardian Statue perfectly!",
                guideJp: "ÈÅãÊÖ∂„Å®Âø´ÊÖ∂„Åå‰Ωú„Å£„ÅüÂ∑®Â§ß„Å™ÂÆàË≠∑Á•û„Åß„Åô„ÄÇÂè£„ÇíÈñã„Åë„Åü„ÄåÈòø„Äç„Å®Èñâ„Åò„Åü„ÄåÂêΩ„Äç„ÅØÂÆáÂÆô„ÅÆÂßã„Åæ„Çä„Å®ÁµÇ„Çè„Çä„ÇíË°®„Åó„Åæ„Åô„ÄÇ",
                guideEn: "Massive guardians by Unkei & Kaikei. The open mouth ('A') and closed mouth ('Un') represent the universe's beginning and end."
            },
            {
                id: 4,
                location: "Todaiji (Great Buddha)",
                locationJp: "Êù±Â§ßÂØ∫„ÉªÂ§ß‰ªèÊÆø",
                missionTitle: "Buddha's Palm Quiz",
                missionJp: "Â§ß‰ªèÊÆø„ÅÆÊ°àÂÜÖÊùø„ÇíË¶ã„Å¶Á≠î„Åà„ÇíÊé¢„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇQ:„ÄåÂ§ß‰ªèÊßò„ÅÆ‰∏≠Êåá„ÅÆÈï∑„Åï„ÅØ„ÄÅÁ¥Ñ‰Ωï„É°„Éº„Éà„É´Ôºü„Äç",
                missionEn: "Find the answer inside. Q: \"How many meters long is the Great Buddha's middle finger?\"",
                guideJp: "‰∏ñÁïåÊúÄÂ§ßÁ¥ö„ÅÆÊú®ÈÄ†Âª∫ÁØâ„Åß„Åô„ÄÇÂ§ß‰ªèÊßò„ÅÆÈ†≠„ÅØÊ±üÊà∏ÊôÇ‰ª£„Å´‰øÆÁêÜ„Åï„Çå„Åü„ÇÇ„ÅÆ„Åß„ÄÅ‰Ωì„Å®Ëâ≤„ÅåÂ∞ë„ÅóÈÅï„ÅÑ„Åæ„Åô„ÄÇ",
                guideEn: "One of the world's largest wooden buildings. The head was repaired in the Edo period, so its color is slightly different."
            },
            {
                id: 5,
                location: "Nigatsudo",
                locationJp: "‰∫åÊúàÂ†Ç",
                missionTitle: "The Back of Youth",
                missionJp: "Â•àËâØÂ∏ÇÂÜÖ„ÅåË¶ãÊ∏°„Åõ„ÇãËàûÂè∞„Åß„ÄÅ„Äå„ÉÅ„Éº„É†ÂÖ®Âì°„ÅÆÂæå„ÇçÂßø„Äç„ÇíÊíÆ„Å£„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇÊâã„ÇÑËÖï„Çí‰Ωø„Å£„Å¶‰∏Ä„Å§„ÅÆÂΩ¢„Çí‰Ωú„Çã„Åì„Å®ÔºÅ",
                missionEn: "Take a photo of \"everyone's back\" on the balcony. You must use your hands/arms to make a shape together!",
                guideJp: "„Äå„ÅäÊ∞¥Âèñ„Çä„Äç„ÅßÊúâÂêç„Å™„ÅäÂ†Ç„Åß„Åô„ÄÇ„Åì„Åì„Åã„ÇâË¶ã„ÇãÂ§ïÊó•„ÅØÁµ∂ÊôØ„Åß„Åô„ÄÇ",
                guideEn: "Famous for the 'Omizutori' festival. The sunset view from this balcony is breathtaking."
            },
            {
                id: 6,
                location: "Sarusawa Pond",
                locationJp: "ÁåøÊ≤¢Ê±† (Goal)",
                missionTitle: "Finish Line Jump",
                missionJp: "Ê±†„ÇíËÉåÊôØ„Å´„ÄÅÂñú„Å≥„ÅÆ„ÄåÂÆåËµ∞„Ç∏„É£„É≥„ÉóÂÜôÁúü„Äç„ÇíÊíÆ„Å£„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇÔºàÁñ≤„Çå„Åü„ÉÅ„Éº„É†„ÅØ‰∫Ä„ÅÆÂÜôÁúü„Åß„ÇÇOKÔºâ",
                missionEn: "Take a \"Group Jump Shot\" with the pond in the background! (Tired teams can take a photo of a turtle instead.)",
                guideJp: "ËààÁ¶èÂØ∫„ÅÆ‰∫îÈáçÂ°î„ÅåÊò†„ÇãÊ±†„Åß„Åô„ÄÇ‰∫Ä„Åå„Åü„Åè„Åï„ÇìÊó•Âêë„Åº„Å£„Åì„Çí„Åó„Å¶„ÅÑ„Åæ„Åô„ÄÇ",
                guideEn: "Famous for the reflection of the pagoda. You can see many turtles sunbathing here."
            }
        ];

        const BonusMission = {
            title: "BONUS STAGE",
            missionTitle: "Global Team",
            missionJp: "Â•àËâØÂÖ¨ÂúíÂÜÖ„Åß4„É∂ÂõΩË™ûÔºàÊó•„ÉªËã±„ÉªÈüì„Éª‰∏≠Ôºâ„ÅåÊõ∏„Åã„Çå„ÅüÁúãÊùø„ÇíÊé¢„Åó„ÄÅ„Åø„Çì„Å™„ÅßÊåáÂ∑Æ„Åó„Å¶ÊíÆÂΩ±„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ",
            missionEn: "Find a signboard written in 4 languages (JP/EN/KR/CN). Take a photo pointing at it together."
        };

        // --- Components ---

        function AutumnLeaves() {
            const leaves = Array.from({ length: 15 }).map((_, i) => {
                const style = {
                    left: `${Math.random() * 100}vw`,
                    animationDuration: `${5 + Math.random() * 10}s`,
                    animationDelay: `${Math.random() * 5}s`,
                    color: ['#8B0000', '#D2691E', '#DAA520'][Math.floor(Math.random() * 3)],
                    fontSize: `${10 + Math.random() * 20}px`
                };
                const type = Math.random() > 0.5 ? 'üçÅ' : 'üçÇ'; 
                return <div key={i} className="leaf" style={style}>{type}</div>;
            });
            return <>{leaves}</>;
        }

        function AccordionCard({ stage }) {
            const [isOpen, setIsOpen] = useState(false);

            return (
                <div className="bg-white rounded-xl shadow-md mb-4 overflow-hidden border border-[#D2691E] bg-opacity-95">
                    {/* Header - Always Visible & Clickable */}
                    <button 
                        onClick={() => setIsOpen(!isOpen)}
                        className="w-full text-left p-4 flex justify-between items-center bg-gradient-to-r from-white to-orange-50 hover:bg-orange-100 transition-colors"
                    >
                        <div className="flex items-center gap-3">
                            <div className="flex flex-col items-center justify-center w-12 h-12 bg-[#8B0000] text-white rounded-lg shadow-sm">
                                <span className="text-[10px] font-bold uppercase">Stage</span>
                                <span className="text-xl font-bold leading-none">{stage.id}</span>
                            </div>
                            <div>
                                <h3 className="font-bold text-gray-800 text-lg leading-tight">{stage.location}</h3>
                                <p className="text-xs text-gray-500 font-medium">{stage.locationJp}</p>
                            </div>
                        </div>
                        <div className={`transform transition-transform duration-300 text-[#D2691E] ${isOpen ? 'rotate-180' : ''}`}>
                            ‚ñº
                        </div>
                    </button>

                    {/* Content - Collapsible */}
                    <div className={`transition-all duration-300 ease-in-out overflow-hidden ${isOpen ? 'max-h-[500px] opacity-100' : 'max-h-0 opacity-0'}`}>
                        <div className="p-4 border-t border-orange-100 bg-white">
                            
                            {/* Mission Section */}
                            <div className="mb-4">
                                <h4 className="text-sm font-black text-[#D2691E] uppercase tracking-wide mb-2 flex items-center gap-2">
                                    <span>üéØ</span> Mission: {stage.missionTitle}
                                </h4>
                                <div className="space-y-2 text-sm">
                                    <div className="bg-red-50 p-3 rounded-md border-l-4 border-red-400">
                                        <p className="text-gray-800 font-medium">{stage.missionJp}</p>
                                    </div>
                                    <div className="bg-blue-50 p-3 rounded-md border-l-4 border-blue-400">
                                        <p className="text-gray-800 font-medium">{stage.missionEn}</p>
                                    </div>
                                </div>
                            </div>

                            {/* Guide Section */}
                            <div className="bg-[#FFFDE7] p-3 rounded-lg border border-yellow-200">
                                <h5 className="text-xs font-bold text-yellow-700 mb-1 flex items-center gap-1">
                                    <span>üí°</span> Did You Know? / Ë±ÜÁü•Ë≠ò
                                </h5>
                                <p className="text-xs text-gray-700 mb-1"><strong className="text-gray-900">[JP]</strong> {stage.guideJp}</p>
                                <p className="text-xs text-gray-700"><strong className="text-gray-900">[EN]</strong> {stage.guideEn}</p>
                            </div>

                        </div>
                    </div>
                </div>
            );
        }

        function BonusCard({ bonus }) {
            const [isOpen, setIsOpen] = useState(false);

            return (
                <div className="bg-gradient-to-br from-[#FFD700] to-[#FFA500] rounded-xl shadow-lg mb-8 overflow-hidden border-2 border-white">
                    <button 
                        onClick={() => setIsOpen(!isOpen)}
                        className="w-full p-4 flex justify-between items-center text-white"
                    >
                        <div className="flex items-center gap-3">
                            <span className="text-2xl">üåü</span>
                            <div className="text-left">
                                <h3 className="font-black text-lg shadow-black drop-shadow-md">{bonus.title}</h3>
                                <p className="text-xs font-medium opacity-90">{bonus.missionTitle}</p>
                            </div>
                        </div>
                        <div className={`transform transition-transform duration-300 ${isOpen ? 'rotate-180' : ''}`}>‚ñº</div>
                    </button>

                    <div className={`transition-all duration-300 ease-in-out overflow-hidden bg-white ${isOpen ? 'max-h-[300px] opacity-100' : 'max-h-0 opacity-0'}`}>
                        <div className="p-4 text-sm">
                            <p className="mb-2 text-gray-800"><strong>[JP]</strong> {bonus.missionJp}</p>
                            <p className="text-gray-800"><strong>[EN]</strong> {bonus.missionEn}</p>
                        </div>
                    </div>
                </div>
            );
        }

        function App() {
            return (
                <div className="min-h-screen pb-10 relative">
                    <AutumnLeaves />
                    
                    {/* Header */}
                    <header className="bg-[#8B0000] text-white p-6 rounded-b-3xl shadow-xl mb-6 relative overflow-hidden">
                        <div className="relative z-10">
                            <h1 className="text-3xl font-black mb-1">NARA QUEST</h1>
                            <div className="w-16 h-1 bg-[#DAA520] mb-2 rounded-full"></div>
                            <p className="text-[#DAA520] font-bold text-sm">BBP International Walking Rally Guide</p>
                            <p className="text-xs opacity-75 mt-1">2025.12.14 | Kyoto ‚Üí Nara</p>
                        </div>
                        {/* Decorative circle */}
                        <div className="absolute -top-10 -right-10 w-40 h-40 bg-[#DAA520] rounded-full opacity-20"></div>
                        <div className="absolute top-10 left-[-20px] w-20 h-20 bg-[#DAA520] rounded-full opacity-10"></div>
                    </header>

                    <div className="max-w-md mx-auto px-4">
                        
                        {/* Welcome/Rules */}
                        <div className="mb-6 bg-white bg-opacity-80 p-4 rounded-lg shadow-sm border border-gray-100 backdrop-blur-sm">
                            <h3 className="font-bold text-[#8B0000] mb-2 border-b border-gray-200 pb-1">üìú GROUND RULES</h3>
                            <ul className="text-sm text-gray-700 space-y-1 list-disc pl-4">
                                <li><strong>Teamwork:</strong> All members in the photo!</li>
                                <li><strong>Safety:</strong> Be gentle with deer.</li>
                                <li><strong>Time:</strong> Goal by 15:30 at Sarusawa Pond.</li>
                            </ul>
                        </div>

                        {/* Stages List */}
                        <div className="space-y-2">
                            {stages.map(stage => (
                                <AccordionCard key={stage.id} stage={stage} />
                            ))}
                        </div>

                        {/* Bonus */}
                        <div className="mt-6">
                            <BonusCard bonus={BonusMission} />
                        </div>

                        {/* Footer */}
                        <div className="text-center text-gray-500 text-xs py-6">
                            <p>Enjoy your trip to Nara!</p>
                            <p className="mt-1 font-bold text-[#8B0000] opacity-50">BBP 2025</p>
                        </div>
                    </div>
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>